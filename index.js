var f=Object.defineProperty,w=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var d=(n,t,r)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,i=(n,t)=>{for(var r in t||(t={}))b.call(t,r)&&d(n,r,t[r]);if(c)for(var r of c(t))y.call(t,r)&&d(n,r,t[r]);return n},m=(n,t)=>w(n,M(t));(function(){"use strict";function n(o){const e=window.panel.plugins.thirdParty;if(e.__marksInitialized)return;const u=e.marks;if(!u)return;const l=o.component("k-writer");o.component("k-writer",{extends:l,methods:{createMarks(){let s=l.options.methods.createMarks.call(this);if(!s)return[];if(!s.length)return console.warn("Custom marks could not be added to the writer instance. At least one original mark has to be enabled."),s;s=s.filter(({name:a})=>!Object.keys(u).includes(a));const k=Object.entries(u).reduce((a,[g,p])=>(a[g]=new p,a),{});return[...s||[],...this.filterExtensions(k,this.marks)||[]]}}}),e.__marksInitialized=!0}class t{constructor(e={}){this.options=i(i({},this.defaults),e)}init(){return null}bindEditor(e=null){this.editor=e}get name(){return null}get type(){return"extension"}get defaults(){return{}}plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class r extends t{constructor(e={}){super(e)}command(){return()=>{}}remove(){this.editor.removeMark(this.name)}get schema(){return null}get type(){return"mark"}toggle(){return this.editor.toggleMark(this.name)}update(e){this.editor.updateMark(this.name,e)}}class h extends r{get button(){return{icon:"quote",label:"Footnote"}}commands(){return()=>this.toggle()}get name(){return"footnote"}get schema(){return{parseDOM:[{tag:"article-footnote"}],toDOM:e=>["article-footnote",i({},e.attrs),0]}}}window.panel.plugin("johannschopplich/kirby-writer-marks",{use:[n],thirdParty:{marks:m(i({},window.panel.plugins.thirdParty.marks||{}),{footnote:h})}})})();
